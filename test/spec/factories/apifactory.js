'use strict';

describe('Service: New', function () {

  beforeEach(module('hackerNewsCloneApp'));

  var New, $httpBackend;

  beforeEach(inject(function ($injector) {
  	$httpBackend   = $injector.get('$httpBackend');
  	New            = $injector.get('New');
  }));

  afterEach(function() {
  	$httpBackend.verifyNoOutstandingExpectation();
  	$httpBackend.verifyNoOutstandingRequest();
  });

  it('should do something', function () {
    expect(!!New).toBe(true);
  });

  it('should load the json containing top story ids', function() {
  	var searchData = {'config': {}, 'data': [ 10994736, 10994885, 10994784, 10995055, 10994707, 10994721, 10994267, 10993470, 10995483, 10993919, 10994912, 10994884, 10994861, 10991729, 10994610, 10994365, 10994676, 10995235, 10994783, 10993961, 10992651, 10994739, 10995107, 10990998, 10994243, 10994578, 10982340, 10994573, 10993953, 10994634, 10990765, 10993847, 10988948, 10994945, 10993349, 10981679, 10991628, 10981997, 10989413, 10986167, 10994325, 10988930, 10992449, 10988746, 10989198, 10988909, 10989210, 10988735, 10984807, 10983331, 10989560, 10986026, 10990194, 10992243, 10987030, 10983385, 10985717, 10982264, 10972854, 10984514, 10977819, 10991254, 10983706, 10991755, 10982594, 10994446, 10989469, 10986652, 10988635, 10986438, 10989264, 10984365, 10974280, 10989451, 10984616, 10991841, 10989341, 10970867, 10984755, 10977279, 10987975, 10988953, 10984731, 10986195, 10984251, 10987647, 10992640, 10980858, 10971571, 10989703, 10982057, 10984724, 10994364, 10976964, 10979220, 10984877, 10993460, 10993452, 10974929, 10981616, 10988901, 10979452, 10985458, 10990462, 10983747, 10984833, 10988751, 10993337, 10993172, 10991130, 10985944, 10986691, 10985464, 10993147, 10981002, 10989433, 10981779, 10985709, 10984125, 10987006, 10983840, 10984974, 10978841, 10986513, 10993105, 10993878, 10977295, 10979513, 10972482, 10990726, 10988748, 10973956, 10982220, 10983937, 10989364, 10988429, 10986732, 10976737, 10987802, 10974552, 10992624, 10982275, 10984620, 10994079, 10986262, 10991751, 10986987, 10977786, 10979303, 10985523, 10983214, 10991434, 10990542, 10990520, 10990504, 10971310, 10979418, 10978069, 10970609, 10983586, 10992232, 10980196, 10978670, 10984288, 10984315, 10978847, 10974036, 10978322, 10975813, 10984291, 10994139, 10981241, 10974916, 10987918, 10985775, 10992875, 10991002, 10984775, 10992353, 10978304, 10984918, 10990783, 10992827, 10978585, 10987678, 10986561, 10993681, 10988615, 10971662, 10986509, 10982936, 10987507, 10980939, 10980179, 10980896, 10978306, 10974870, 10982558, 10976299, 10983732, 10988006, 10974803, 10990968, 10993284, 10987913, 10989818, 10973889, 10975838, 10974050, 10989598, 10987783, 10989114, 10986720, 10972051, 10984493, 10972706, 10986592, 10982192, 10975303, 10975791, 10975317, 10988350, 10972522, 10978761, 10976194, 10993120, 10974948, 10976365, 10978542, 10980147, 10976794, 10987004, 10978689, 10980696, 10971694, 10980182, 10976448, 10987684, 10976511, 10985764, 10973133, 10977607, 10979165, 10980051, 10978034, 10975254, 10972492, 10972995, 10976714, 10972849, 10987419, 10990447, 10985263, 10992599, 10971809, 10978672, 10978838, 10972235, 10992456, 10971359, 10981148, 10970594, 10971132, 10985691, 10978285, 10978270, 10973327, 10993085, 10987050, 10978690, 10975454, 10981047, 10984781, 10984751, 10990709, 10972808, 10987956, 10973394, 10984383, 10970816, 10984191, 10986370, 10973188, 10991634, 10990743, 10976266, 10979926, 10972589, 10972290, 10986321, 10990026, 10992635, 10974305, 10970110, 10980390, 10986580, 10971972, 10975423, 10971540, 10976898, 10988428, 10975098, 10971698, 10975689, 10973515, 10990507, 10975266, 10978324, 10978677, 10979268, 10993339, 10981001, 10987466, 10988863, 10984893, 10972359, 10973682, 10974169, 10987839, 10976993, 10973839, 10988669, 10976286, 10971763, 10984386, 10970312, 10989800, 10987619, 10979833, 10973406, 10970807, 10972862, 10986448, 10980351, 10987343, 10984716, 10970830, 10971645, 10988849, 10982551, 10990719, 10978565, 10978787, 10971836, 10985515, 10983377, 10981003, 10978538, 10972401, 10976280, 10983506, 10986312, 10979957, 10980867, 10989623, 10977777, 10987020, 10971117, 10986168, 10971412, 10971407, 10980023, 10989345, 10972146, 10988912, 10988834, 10988806, 10979069, 10985137, 10984312, 10986587, 10988666, 10988644, 10978971, 10987292, 10978077, 10972736, 10983768, 10975435, 10983249, 10972700, 10975503, 10984584, 10974760, 10988057, 10984447, 10986896, 10969920, 10969912, 10980499, 10979036, 10986716, 10986049, 10986002, 10990322, 10979365, 10986529, 10978685, 10985633, 10987462, 10979905, 10976648, 10976579, 10972561, 10986088, 10976022, 10987302, 10979136, 10972160, 10980439, 10975119, 10978760, 10983985, 10971539, 10986975, 10971406, 10986850, 10981939, 10985065, 10973423, 10973396, 10986726, 10973317, 10977972, 10984399, 10986650, 10973187, 10973138, 10977998, 10979584, 10984206, 10977014, 10970495, 10972947, 10979304, 10972691, 10980360, 10986214, 10977262, 10978086, 10972194, 10973366, 10972071, 10985778, 10985660, 10973053, 10971691, 10979871, 10985233, 10971448, 10971391, 10971326, 10978088, 10971104, 10970824, 10970809, 10975909, 10980281, 10973598, 10984178, 10984006, 10983721, 10979760, 10973056, 10983286, 10982986, 10972635, 10975834, 10982453, 10982356, 10982329, 10982177, 10978274, 10981909, 10971462, 10978921, 10978827, 10981239, 10981123, 10979907, 10974003, 10980157, 10986590, 10987663, 10980715, 10980658, 10980483, 10980401, 10981476, 10979901, 10979888, 10974214, 10979438, 10970709, 10971769, 10978884, 10975351, 10978785, 10978769, 10978651 ]};
  	$httpBackend.whenGET('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty').respond(function() {
  	  return [200, searchData];
  	});
    New.get().success(function (data) {
      expect(data.data.length).toBe(searchData.data.length);
    });
    $httpBackend.flush();
  });

});
